<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
/*
    promise.all: giúp chạy song song các promise
    luồng 1, luồng 2...luồng n, chạy không phụ thuộc nhau, nhưng mà vẫn muốn lấy kết quả
    của luồng 1,2,3,...n để làm việc gì đó thì có thể chạy song song của các luồng, cùng nhận kết quả để làm việc gì đó chung
    => gọi là promise.all
*/
        let promise1 = new Promise(function(resolve) {
            setTimeout(() => {
                resolve([1]);
            }, 2000);
        })

        //let promise3 = Promise.reject('loi roi !');

        let promise2 = new Promise(function(resolve) {
            setTimeout(() => {
                resolve([1,2,3]);
            }, 4000);
        })

        // tất cả các promise sẽ song song và nhận kết quả cùng lúc. sẽ tiết kiệm thời gian hơn
        // những nếu 1 promise bị lỗi cho dù các promise khác có xong hay không xong thì nó cũng sẽ chạy thằng vào catch và kết thúc chương trình
        // => đây cũng là tính năng hay của promise.all khi mà mình muốn làm tất cả mọi việc song song mà lỡ có 1 thằng bị lỗi thì không làm việc đó nữa

        Promise.all([promise1, promise2])
            .then(function(result) {
                console.log(result[0], ...result[1]);
            })
            .catch(function(err) {
                console.log(err);
            })
    </script>
</body>
</html>